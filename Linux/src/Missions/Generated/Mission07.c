//
//  Mission07.c
//
//  Finite state machine routines for "Mission07" mission
//
//  Copyright (C) 1998 Relic Entertainment Inc.
//  All rights reserved
//
//  This code was autogenerated from Mission07.kp by KAS2C Version 2.05sdl
//


#include "Mission07.h"  // prototypes and #includes for exposed game functions

extern AITeam *CurrentTeamP;
#define kasThisTeamPtr CurrentTeamP

//  for run-time scoping of symbols (variables, timers, etc.)
extern sdword CurrentMissionScope;
extern char CurrentMissionScopeName[];

//  for displaying localized strings
extern udword strCurLanguage;

static char *LSTRING_LCLocationCard[] = {  // multilingual strings
	"THE GARDENS OF KADESH",
	"JARDINS DE KADESH",
	"DIE GÄRTEN VON KADESH",
	"LOS JARDINES DE KADESH",
	"I GIARDINI DI KADESH", };

static char *LSTRING_FIEngage[] = {  // multilingual strings
	"Yes, co-ordinates set.  Engage hyperdrive!",
	"Oui, le cap est déterminé. Enclenchez l'hyperpropulsion!",
	"Ja, Koordinaten sind eingestellt. Hypersprung-Aggregat einschalten!",
	"Sí, coordenadas establecidas. Activar hiperpropulsión.",
	"Coordinate impostate: attiva l'iperguida!", };

static char *LSTRING_FIProtectResources[] = {  // multilingual strings
	"Enemy forces are concentrating on our Resource Collectors.  Allocate combat vessels to protect them.",
	"Les forces ennemies se concentrent sur nos Collecteurs de Ressources.  Affectez des unités de combat à leur protection.",
	"Feindliche Kräfte konzentrieren sich auf unsere Rohstoffernteschiffe. Setzen Sie Kampfschiffe zu ihrem Schutz ein.",
	"Las fuerzas enemigas se concentran en nuestros recolectores de recursos. Asigna naves de combate a su protección.",
	"Le forze nemiche si stanno concentrando intorno ai nostri Collettori di Ricerca: disponi le forze in modo da proteggerli.", };

static char *LSTRING_TBHyperspace[] = {  // multilingual strings
	"                HYPERSPACE",
	"                HYPERESPACE",
	"        HYPERRAUMSPRUNG",
	"              HIPERESPACIO",
	"				IPERSPAZIO", };

static char *LSTRING_OBDefendFleet[] = {  // multilingual strings
	"Defend Fleet",
	"Défendre la Flotte",
	"Flotte schützen.",
	"Defiende la flota",
	"Difendi la flotta", };

static char *LSTRING_OBHarvestNebula[] = {  // multilingual strings
	"Harvest Nebula",
	"Collecter des ressources au sein de la Nébuleuse",
	"Rohstoffe in Nebelwolke ernten.",
	"Recolecta nebulosas",
	"Raccogli le risorse nella nebulosa", };

static char *LSTRING_OBProtect[] = {  // multilingual strings
	"Protect Resourcers",
	"Protéger les collecteurs de ressources",
	"Rohstoffschiffe schützen.",
	"Protege los recursos",
	"Proteggi le risorse", };

static char *LSTRING_LevelSave[] = {  // multilingual strings
	"07 - The Gardens of Kadesh",
	"07 - Jardins de Kadesh",
	"07 – Die Gärten von Kadesh",
	"07 - Los jardines de Kadesh",
	"07 - I giardini di Kadesh", };

//
//  "initialize" code for Mission07 HonourGuardSwarm FSM
//
void Init_Mission07_HonourGuardSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("DockCount", 0), 0);
	(kasfVarCreateSet("PodCount", 1), 0);
	if (kasfThisTeamIs(kasAITeamPtr("HighGuardSwarmers1")))
	{
	kasJump("WaitingLeader", Init_Mission07_HonourGuardSwarm_WaitingLeader, Watch_Mission07_HonourGuardSwarm_WaitingLeader);
	return;
	}
	else if (kasfThisTeamIs(kasAITeamPtr("HighGuardSwarmers2")))
	{
	kasJump("Waiting", Init_Mission07_HonourGuardSwarm_Waiting, Watch_Mission07_HonourGuardSwarm_Waiting);
	return;
	}
	
}


//
//  "watch" code for Mission07 HonourGuardSwarm FSM
//
void Watch_Mission07_HonourGuardSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("_VIFONCE001") && (kasfTeamCount() == 0)) // "ifonce" #1
	{
	kasfVarCreateSet("_VIFONCE001", 1);
	kasJump("NullState", Init_Mission07_HonourGuardSwarm_NullState, Watch_Mission07_HonourGuardSwarm_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 HonourGuardSwarm Waiting state
//
void Init_Mission07_HonourGuardSwarm_Waiting(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 HonourGuardSwarm Waiting state
//
void Watch_Mission07_HonourGuardSwarm_Waiting(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfMsgReceived("HonourAttack"))
	{
	kasJump("WaitingLeader", Init_Mission07_HonourGuardSwarm_WaitingLeader, Watch_Mission07_HonourGuardSwarm_WaitingLeader);
	return;
	}
	
}


//
//  "initialize" code for Mission07 HonourGuardSwarm WaitingLeader state
//
void Init_Mission07_HonourGuardSwarm_WaitingLeader(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 HonourGuardSwarm WaitingLeader state
//
void Watch_Mission07_HonourGuardSwarm_WaitingLeader(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfFindEnemiesInside(kasVolumePtr("CheckVolume"), kasGrowSelectionPtr("Invaders"), 4000))
	{
	kasJump("Attack", Init_Mission07_HonourGuardSwarm_Attack, Watch_Mission07_HonourGuardSwarm_Attack);
	return;
	}
	
}


//
//  "initialize" code for Mission07 HonourGuardSwarm Attack state
//
void Init_Mission07_HonourGuardSwarm_Attack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTacticsAggressive(), 0);
	(kasfAttack(kasGrowSelectionPtr("Invaders")), 0);
	
}


//
//  "watch" code for Mission07 HonourGuardSwarm Attack state
//
void Watch_Mission07_HonourGuardSwarm_Attack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("DockTimer"))
	{
	kasJump("Dock", Init_Mission07_HonourGuardSwarm_Dock, Watch_Mission07_HonourGuardSwarm_Dock);
	return;
	}
	if (!kasfTimerRemaining("DockTimer") && ((kasfShipsCount(kasGrowSelectionPtr("Invaders")) == 0) || (kasfTeamFuelLowest() < 25)))
	{
	(kasfTimerCreateSetStart("DockTimer", 3), 0);
	(kasfMsgSendAll("HonourAttack"), 0);
	}
	
}


//
//  "initialize" code for Mission07 HonourGuardSwarm Dock state
//
void Init_Mission07_HonourGuardSwarm_Dock(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if ((kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod1"))) && (kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod2"))))
	{
	kasfShipsAdd(kasGrowSelectionPtr("DockShips"), kasAITeamShipsPtr("HighGuardFuelPod1"));
	kasfShipsAdd(kasGrowSelectionPtr("DockShips"), kasAITeamShipsPtr("HighGuardFuelPod2"));
	(kasfShipsDockSupportWith((&kasThisTeamPtr->shipList), kasGrowSelectionPtr("DockShips")), 0);
	}
	else if (kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod1")))
	{
	(kasfDockSupportWith(kasAITeamPtr("HighGuardFuelPod1")), 0);
	}
	else if (kasfShipsCount(kasAITeamShipsPtr("HighGuardFuelPod2")))
	{
	(kasfDockSupportWith(kasAITeamPtr("HighGuardFuelPod2")), 0);
	}
	else
	{
	}
	
}


//
//  "watch" code for Mission07 HonourGuardSwarm Dock state
//
void Watch_Mission07_HonourGuardSwarm_Dock(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfTeamDocking())
	{
	kasJump("Waiting", Init_Mission07_HonourGuardSwarm_Waiting, Watch_Mission07_HonourGuardSwarm_Waiting);
	return;
	}
	
}


//
//  "initialize" code for Mission07 HonourGuardSwarm NullState state
//
void Init_Mission07_HonourGuardSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 HonourGuardSwarm NullState state
//
void Watch_Mission07_HonourGuardSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 GenericSwarmAttack FSM
//
void Init_Mission07_GenericSwarmAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasfShipsAdd(kasGrowSelectionPtr("GenericSwarmers"), (&kasThisTeamPtr->shipList));
	(kasfTeamGiveToAI(), 0);
	kasJump("NullState", Init_Mission07_GenericSwarmAttack_NullState, Watch_Mission07_GenericSwarmAttack_NullState);
	return;
	
}


//
//  "watch" code for Mission07 GenericSwarmAttack FSM
//
void Watch_Mission07_GenericSwarmAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 GenericSwarmAttack NullState state
//
void Init_Mission07_GenericSwarmAttack_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 GenericSwarmAttack NullState state
//
void Watch_Mission07_GenericSwarmAttack_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 GenericMothershipSwarm FSM
//
void Init_Mission07_GenericMothershipSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("DeadMoSwarmers", 0), 0);
	kasfShipsAdd(kasGrowSelectionPtr("MothershipSwarm"), (&kasThisTeamPtr->shipList));
	(kasfVarCreateSet("LastMoSwarmers", kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))), 0);
	kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Temp"), "Mothership");
	kasfFindEnemiesNearby(kasGrowSelectionPtr("Temp"), 10000);
	kasfShipsSelectType(kasGrowSelectionPtr("Moship"), kasGrowSelectionPtr("Temp"), "Mothership");
	kasfShipsRemove(kasGrowSelectionPtr("Temp"), kasGrowSelectionPtr("Moship"));
	if ((kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Fighter")) || (kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Corvette")) || (kasfShipsSelectCapital(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"))) || (kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Resource")) || (kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_NonCombat")))
	{
	if (kasfShipsSelectType(kasGrowSelectionPtr("Field"), kasGrowSelectionPtr("Targets"), "DFGFrigate"))
	{
	kasfShipsRemove(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Field"));
	if (!kasfShipsCount(kasGrowSelectionPtr("Targets")))
	{
	if (kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_Resource") || kasfShipsSelectClass(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Temp"), "CLASS_NonCombat"))
	{
	}
	}
	}
	if (kasfShipsSelectDamaged(kasGrowSelectionPtr("Damaged"), kasGrowSelectionPtr("Targets"), 50) || kasfShipsSelectDamaged(kasGrowSelectionPtr("Damaged"), kasGrowSelectionPtr("Targets"), 90))
	{
	(kasfGrowSelectionClear(kasGrowSelectionPtr("Targets")), 0);
	kasfShipsAdd(kasGrowSelectionPtr("Targets"), kasGrowSelectionPtr("Damaged"));
	}
	(kasfSetSwarmerTargets(kasGrowSelectionPtr("Targets")), 0);
	}
	(kasfTeamGiveToAI(), 0);
	kasJump("NullState", Init_Mission07_GenericMothershipSwarm_NullState, Watch_Mission07_GenericMothershipSwarm_NullState);
	return;
	
}


//
//  "watch" code for Mission07 GenericMothershipSwarm FSM
//
void Watch_Mission07_GenericMothershipSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm")) < kasfVarValueGet("LastMoSwarmers"))
	{
	(kasfVarValueSet("DeadMoSwarmers", kasfVarValueGet("DeadMoSwarmers") + (kasfVarValueGet("LastMoSwarmers") - kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm")))), 0);
	(kasfVarValueSet("LastMoSwarmers", kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm"))), 0);
	}
	if (!kasfVarValueGet("_VIFONCE002") && (kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm")) < kasfVarValueGet("DeadMoSwarmers"))) // "ifonce" #2
	{
	kasfVarCreateSet("_VIFONCE002", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "MoSwarmersInTrouble"), 0);
	(kasfMsgSend(kasAITeamPtr("Dummy1"), "MoSwarmersInTrouble"), 0);
	}
	if (!kasfVarValueGet("_VIFONCE003") && (!kasfShipsCount(kasGrowSelectionPtr("MothershipSwarm")))) // "ifonce" #3
	{
	kasfVarCreateSet("_VIFONCE003", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "MoSwarmersDead"), 0);
	}
	
}


//
//  "initialize" code for Mission07 GenericMothershipSwarm NullState state
//
void Init_Mission07_GenericMothershipSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 GenericMothershipSwarm NullState state
//
void Watch_Mission07_GenericMothershipSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 GenericResourcerSwarm FSM
//
void Init_Mission07_GenericResourcerSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("DeadResSwarmers", 0), 0);
	kasfShipsAdd(kasGrowSelectionPtr("ResourcerSwarm"), (&kasThisTeamPtr->shipList));
	(kasfVarCreateSet("LastResSwarmers", kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))), 0);
	if (kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Coll"), "ResourceCollector"))
	{
	(kasfVarCreateSet("TakingResourcers", 1), 0);
	}
	else
	{
	kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Coll"), "ResourceController");
	}
	(kasfTimerCreateSetStart("ResSwarm", 40), 0);
	kasJump("MoveToTarget", Init_Mission07_GenericResourcerSwarm_MoveToTarget, Watch_Mission07_GenericResourcerSwarm_MoveToTarget);
	return;
	
}


//
//  "watch" code for Mission07 GenericResourcerSwarm FSM
//
void Watch_Mission07_GenericResourcerSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm")) < kasfVarValueGet("LastResSwarmers"))
	{
	(kasfVarValueSet("DeadResSwarmers", kasfVarValueGet("DeadResSwarmers") + (kasfVarValueGet("LastResSwarmers") - kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm")))), 0);
	(kasfVarValueSet("LastResSwarmers", kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm"))), 0);
	}
	if (!kasfVarValueGet("_VIFONCE004") && (kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm")) < kasfVarValueGet("DeadResSwarmers"))) // "ifonce" #4
	{
	kasfVarCreateSet("_VIFONCE004", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResSwarmersInTrouble"), 0);
	(kasfMsgSend(kasAITeamPtr("Dummy1"), "ResSwarmersInTrouble"), 0);
	}
	if (!kasfVarValueGet("_VIFONCE005") && (!kasfShipsCount(kasGrowSelectionPtr("ResourcerSwarm")))) // "ifonce" #5
	{
	kasfVarCreateSet("_VIFONCE005", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResSwarmersDead"), 0);
	}
	
}


//
//  "initialize" code for Mission07 GenericResourcerSwarm MoveToTarget state
//
void Init_Mission07_GenericResourcerSwarm_MoveToTarget(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSwarmMoveTo(kasGrowSelectionPtr("Coll")), 0);
	
}


//
//  "watch" code for Mission07 GenericResourcerSwarm MoveToTarget state
//
void Watch_Mission07_GenericResourcerSwarm_MoveToTarget(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("ResSwarm"))
	{
	if (kasfVarValueGet("TakingResourcers"))
	{
	(kasfMsgSendAll("ImTakingTheResourcers"), 0);
	}
	(kasfStop(), 0);
	(kasfSetSwarmerTargets(kasGrowSelectionPtr("Coll")), 0);
	(kasfTeamGiveToAI(), 0);
	kasJump("NullState", Init_Mission07_GenericResourcerSwarm_NullState, Watch_Mission07_GenericResourcerSwarm_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 GenericResourcerSwarm NullState state
//
void Init_Mission07_GenericResourcerSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 GenericResourcerSwarm NullState state
//
void Watch_Mission07_GenericResourcerSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 ResourceDefenderSwarm FSM
//
void Init_Mission07_ResourceDefenderSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("DeadResDefSwarmers", 0), 0);
	kasfShipsAdd(kasGrowSelectionPtr("ResourceDefSwarm"), (&kasThisTeamPtr->shipList));
	(kasfVarCreateSet("LastResDefSwarmers", kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))), 0);
	if ((kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Temp1"), "ResourceController")) || (kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Temp2"), "ResourceCollector")))
	{
	kasfShipsAdd(kasGrowSelectionPtr("Resource"), kasGrowSelectionPtr("Temp1"));
	kasfShipsAdd(kasGrowSelectionPtr("Resource"), kasGrowSelectionPtr("Temp2"));
	kasfShipsAdd(kasGrowSelectionPtr("Defenders"), kasGrowSelectionPtr("Resource"));
	kasfFindEnemiesNearby(kasGrowSelectionPtr("Defenders"), 5000);
	kasfShipsRemove(kasGrowSelectionPtr("Defenders"), kasGrowSelectionPtr("Temp"));
	}
	(kasfTimerCreateSetStart("ResDefSwarm", 20), 0);
	kasJump("MoveToTarget", Init_Mission07_ResourceDefenderSwarm_MoveToTarget, Watch_Mission07_ResourceDefenderSwarm_MoveToTarget);
	return;
	
}


//
//  "watch" code for Mission07 ResourceDefenderSwarm FSM
//
void Watch_Mission07_ResourceDefenderSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm")) < kasfVarValueGet("LastResDefSwarmers"))
	{
	(kasfVarValueSet("DeadResDefSwarmers", kasfVarValueGet("DeadResSwarmers") + (kasfVarValueGet("LastResSwarmers") - kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm")))), 0);
	(kasfVarValueSet("LastResDefSwarmers", kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm"))), 0);
	}
	if (!kasfVarValueGet("_VIFONCE006") && (kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm")) < kasfVarValueGet("DeadResDefSwarmers"))) // "ifonce" #6
	{
	kasfVarCreateSet("_VIFONCE006", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResDefSwarmersInTrouble"), 0);
	(kasfMsgSend(kasAITeamPtr("Dummy1"), "ResDefSwarmersInTrouble"), 0);
	}
	if (!kasfVarValueGet("_VIFONCE007") && (!kasfShipsCount(kasGrowSelectionPtr("ResourceDefSwarm")))) // "ifonce" #7
	{
	kasfVarCreateSet("_VIFONCE007", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "ResDefSwarmersDead"), 0);
	}
	
}


//
//  "initialize" code for Mission07 ResourceDefenderSwarm MoveToTarget state
//
void Init_Mission07_ResourceDefenderSwarm_MoveToTarget(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSwarmMoveTo(kasGrowSelectionPtr("Defenders")), 0);
	
}


//
//  "watch" code for Mission07 ResourceDefenderSwarm MoveToTarget state
//
void Watch_Mission07_ResourceDefenderSwarm_MoveToTarget(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("ResDefSwarm"))
	{
	(kasfStop(), 0);
	(kasfSetSwarmerTargets(kasGrowSelectionPtr("Defenders")), 0);
	(kasfTeamGiveToAI(), 0);
	kasJump("NullState", Init_Mission07_ResourceDefenderSwarm_NullState, Watch_Mission07_ResourceDefenderSwarm_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 ResourceDefenderSwarm NullState state
//
void Init_Mission07_ResourceDefenderSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 ResourceDefenderSwarm NullState state
//
void Watch_Mission07_ResourceDefenderSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 DefendMothership FSM
//
void Init_Mission07_DefendMothership(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasfUnderAttackElsewhere(kasAITeamPtr("P2Mothership"), kasGrowSelectionPtr("Attackers"));
	(kasfSetSwarmerTargets(kasGrowSelectionPtr("Attackers")), 0);
	kasfShipsAdd(kasGrowSelectionPtr("DefendMothership"), (&kasThisTeamPtr->shipList));
	(kasfTeamGiveToAI(), 0);
	kasJump("NullState", Init_Mission07_DefendMothership_NullState, Watch_Mission07_DefendMothership_NullState);
	return;
	
}


//
//  "watch" code for Mission07 DefendMothership FSM
//
void Watch_Mission07_DefendMothership(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("_VIFONCE008") && (kasfTeamCount() == 0)) // "ifonce" #8
	{
	kasfVarCreateSet("_VIFONCE008", 1);
	kasJump("NullState", Init_Mission07_DefendMothership_NullState, Watch_Mission07_DefendMothership_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 DefendMothership NullState state
//
void Init_Mission07_DefendMothership_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 DefendMothership NullState state
//
void Watch_Mission07_DefendMothership_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 IntroAttack FSM
//
void Init_Mission07_IntroAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfShipsSetNonRetaliation((&kasThisTeamPtr->shipList)), 0);
	kasJump("GetStarted", Init_Mission07_IntroAttack_GetStarted, Watch_Mission07_IntroAttack_GetStarted);
	return;
	
}


//
//  "watch" code for Mission07 IntroAttack FSM
//
void Watch_Mission07_IntroAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("_VIFONCE009") && (kasfTeamCount() == 0)) // "ifonce" #9
	{
	kasfVarCreateSet("_VIFONCE009", 1);
	kasJump("NullState", Init_Mission07_IntroAttack_NullState, Watch_Mission07_IntroAttack_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 IntroAttack GetStarted state
//
void Init_Mission07_IntroAttack_GetStarted(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfAttackMothership(), 0);
	
}


//
//  "watch" code for Mission07 IntroAttack GetStarted state
//
void Watch_Mission07_IntroAttack_GetStarted(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfNearby(kasVectorPtr("StartPointPlayer"), 10000))
	{
	kasJump("WaitForAttack", Init_Mission07_IntroAttack_WaitForAttack, Watch_Mission07_IntroAttack_WaitForAttack);
	return;
	}
	if (kasfMsgReceived("Attack"))
	{
	(kasfStop(), 0);
	(kasfShipsSetRetaliation((&kasThisTeamPtr->shipList)), 0);
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasThisTeamPtr);
	}
	if (kasfUnderAttack(kasGrowSelectionPtr("PartyPoopers")))
	{
	(kasfStop(), 0);
	(kasfShipsSetRetaliation((&kasThisTeamPtr->shipList)), 0);
	(kasfMsgSend(kasAITeamPtr("Dummy1"), "UnderAttack"), 0);
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasThisTeamPtr);
	}
	
}


//
//  "initialize" code for Mission07 IntroAttack WaitForAttack state
//
void Init_Mission07_IntroAttack_WaitForAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfMsgSend(kasAITeamPtr("Dummy1"), "Stopped"), 0);
	(kasfStop(), 0);
	
}


//
//  "watch" code for Mission07 IntroAttack WaitForAttack state
//
void Watch_Mission07_IntroAttack_WaitForAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfMsgReceived("Attack"))
	{
	(kasfShipsSetRetaliation((&kasThisTeamPtr->shipList)), 0);
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasThisTeamPtr);
	}
	if (kasfUnderAttack(kasGrowSelectionPtr("PartyPoopers")))
	{
	(kasfShipsSetRetaliation((&kasThisTeamPtr->shipList)), 0);
	(kasfMsgSendAll("Attack"), 0);
	(kasfMsgSend(kasAITeamPtr("Dummy1"), "UnderAttack"), 0);
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasThisTeamPtr);
	}
	
}


//
//  "initialize" code for Mission07 IntroAttack NullState state
//
void Init_Mission07_IntroAttack_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 IntroAttack NullState state
//
void Watch_Mission07_IntroAttack_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 PreAttackPod FSM
//
void Init_Mission07_PreAttackPod(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("Dock", Init_Mission07_PreAttackPod_Dock, Watch_Mission07_PreAttackPod_Dock);
	return;
	
}


//
//  "watch" code for Mission07 PreAttackPod FSM
//
void Watch_Mission07_PreAttackPod(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfMsgReceived("DockNow"))
	{
	kasJump("NullState", Init_Mission07_PreAttackPod_NullState, Watch_Mission07_PreAttackPod_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackPod Dock state
//
void Init_Mission07_PreAttackPod_Dock(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTeamHyperspaceOut(), 0);
	
}


//
//  "watch" code for Mission07 PreAttackPod Dock state
//
void Watch_Mission07_PreAttackPod_Dock(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfMsgReceived("DefendMothership"))
	{
	(kasfVarCreateSet("DefendMothership", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackPod_WaitToLaunch, Watch_Mission07_PreAttackPod_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("MothershipSwarm"))
	{
	(kasfVarCreateSet("MothershipSwarm", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackPod_WaitToLaunch, Watch_Mission07_PreAttackPod_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("ResourceSwarm"))
	{
	(kasfVarCreateSet("ResourceSwarm", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackPod_WaitToLaunch, Watch_Mission07_PreAttackPod_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("ResourceDefenderSwarm"))
	{
	(kasfVarCreateSet("ResourceDefenderSwarm", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackPod_WaitToLaunch, Watch_Mission07_PreAttackPod_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("IntroAttack"))
	{
	(kasfVarCreateSet("IntroAttack", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackPod_WaitToLaunch, Watch_Mission07_PreAttackPod_WaitToLaunch);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackPod WaitToLaunch state
//
void Init_Mission07_PreAttackPod_WaitToLaunch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("WaitToLaunch", 5), 0);
	
}


//
//  "watch" code for Mission07 PreAttackPod WaitToLaunch state
//
void Watch_Mission07_PreAttackPod_WaitToLaunch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("WaitToLaunch"))
	{
	kasJump("Launch", Init_Mission07_PreAttackPod_Launch, Watch_Mission07_PreAttackPod_Launch);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackPod Launch state
//
void Init_Mission07_PreAttackPod_Launch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTeamHyperspaceInNear(kasTeamsVectorPtr("MsgSender"), 1000), 0);
	(kasfTimerCreateSetStart("GiveToAI", 10), 0);
	
}


//
//  "watch" code for Mission07 PreAttackPod Launch state
//
void Watch_Mission07_PreAttackPod_Launch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("GiveToAI"))
	{
	kasJump("GetOrders", Init_Mission07_PreAttackPod_GetOrders, Watch_Mission07_PreAttackPod_GetOrders);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackPod GetOrders state
//
void Init_Mission07_PreAttackPod_GetOrders(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfVarValueGet("DefendMothership"))
	{
	kasFSMCreate("DefendMothership", Init_Mission07_DefendMothership, Watch_Mission07_DefendMothership, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("MothershipSwarm"))
	{
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("ResourceSwarm"))
	{
	kasFSMCreate("GenericResourcerSwarm", Init_Mission07_GenericResourcerSwarm, Watch_Mission07_GenericResourcerSwarm, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("ResourceDefenderSwarm"))
	{
	kasFSMCreate("ResourceDefenderSwarm", Init_Mission07_ResourceDefenderSwarm, Watch_Mission07_ResourceDefenderSwarm, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("IntroAttack"))
	{
	kasFSMCreate("IntroAttack", Init_Mission07_IntroAttack, Watch_Mission07_IntroAttack, kasThisTeamPtr);
	}
	
}


//
//  "watch" code for Mission07 PreAttackPod GetOrders state
//
void Watch_Mission07_PreAttackPod_GetOrders(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 PreAttackPod NullState state
//
void Init_Mission07_PreAttackPod_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 PreAttackPod NullState state
//
void Watch_Mission07_PreAttackPod_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfShipsCount((&kasThisTeamPtr->shipList)) && kasfMsgReceived("P2MothershipBlowin"))
	{
	(kasfTeamHyperspaceOut(), 0);
	}
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm FSM
//
void Init_Mission07_PreAttackSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("Dock", Init_Mission07_PreAttackSwarm_Dock, Watch_Mission07_PreAttackSwarm_Dock);
	return;
	
}


//
//  "watch" code for Mission07 PreAttackSwarm FSM
//
void Watch_Mission07_PreAttackSwarm(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm Dock state
//
void Init_Mission07_PreAttackSwarm_Dock(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfDockInstant(kasAITeamPtr("P2Mothership")), 0);
	
}


//
//  "watch" code for Mission07 PreAttackSwarm Dock state
//
void Watch_Mission07_PreAttackSwarm_Dock(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfMsgReceived("DefendMothership"))
	{
	(kasfVarCreateSet("DefendMothership", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackSwarm_WaitToLaunch, Watch_Mission07_PreAttackSwarm_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("MothershipSwarm"))
	{
	(kasfVarCreateSet("MothershipSwarm", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackSwarm_WaitToLaunch, Watch_Mission07_PreAttackSwarm_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("ResourceSwarm"))
	{
	(kasfVarCreateSet("ResourceSwarm", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackSwarm_WaitToLaunch, Watch_Mission07_PreAttackSwarm_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("ResourceDefenderSwarm"))
	{
	(kasfVarCreateSet("ResourceDefenderSwarm", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackSwarm_WaitToLaunch, Watch_Mission07_PreAttackSwarm_WaitToLaunch);
	return;
	}
	else if (kasfMsgReceived("IntroAttack"))
	{
	(kasfVarCreateSet("IntroAttack", 1), 0);
	kasJump("WaitToLaunch", Init_Mission07_PreAttackSwarm_WaitToLaunch, Watch_Mission07_PreAttackSwarm_WaitToLaunch);
	return;
	}
	if (kasfMsgReceived("DockNow"))
	{
	kasJump("NullState", Init_Mission07_PreAttackSwarm_NullState, Watch_Mission07_PreAttackSwarm_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm WaitToLaunch state
//
void Init_Mission07_PreAttackSwarm_WaitToLaunch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("WaitToLaunch", 5), 0);
	
}


//
//  "watch" code for Mission07 PreAttackSwarm WaitToLaunch state
//
void Watch_Mission07_PreAttackSwarm_WaitToLaunch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("WaitToLaunch"))
	{
	kasJump("Launch", Init_Mission07_PreAttackSwarm_Launch, Watch_Mission07_PreAttackSwarm_Launch);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm Launch state
//
void Init_Mission07_PreAttackSwarm_Launch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfLaunch(), 0);
	(kasfTimerCreateSetStart("GiveToAI", 10), 0);
	
}


//
//  "watch" code for Mission07 PreAttackSwarm Launch state
//
void Watch_Mission07_PreAttackSwarm_Launch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfMsgReceived("DockNow"))
	{
	kasJump("DockAgain", Init_Mission07_PreAttackSwarm_DockAgain, Watch_Mission07_PreAttackSwarm_DockAgain);
	return;
	}
	if (kasfTimerExpiredDestroy("GiveToAI"))
	{
	kasJump("GetOrders", Init_Mission07_PreAttackSwarm_GetOrders, Watch_Mission07_PreAttackSwarm_GetOrders);
	return;
	}
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm DockAgain state
//
void Init_Mission07_PreAttackSwarm_DockAgain(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfDockStay(kasAITeamPtr("P2Mothership")), 0);
	
}


//
//  "watch" code for Mission07 PreAttackSwarm DockAgain state
//
void Watch_Mission07_PreAttackSwarm_DockAgain(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm GetOrders state
//
void Init_Mission07_PreAttackSwarm_GetOrders(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfVarValueGet("DefendMothership"))
	{
	kasFSMCreate("DefendMothership", Init_Mission07_DefendMothership, Watch_Mission07_DefendMothership, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("MothershipSwarm"))
	{
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("ResourceSwarm"))
	{
	kasFSMCreate("GenericResourcerSwarm", Init_Mission07_GenericResourcerSwarm, Watch_Mission07_GenericResourcerSwarm, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("ResourceDefenderSwarm"))
	{
	kasFSMCreate("ResourceDefenderSwarm", Init_Mission07_ResourceDefenderSwarm, Watch_Mission07_ResourceDefenderSwarm, kasThisTeamPtr);
	}
	else if (kasfVarValueGet("IntroAttack"))
	{
	kasFSMCreate("IntroAttack", Init_Mission07_IntroAttack, Watch_Mission07_IntroAttack, kasThisTeamPtr);
	}
	
}


//
//  "watch" code for Mission07 PreAttackSwarm GetOrders state
//
void Watch_Mission07_PreAttackSwarm_GetOrders(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 PreAttackSwarm NullState state
//
void Init_Mission07_PreAttackSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 PreAttackSwarm NullState state
//
void Watch_Mission07_PreAttackSwarm_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 Events FSM
//
void Init_Mission07_Events(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("InNullState", 0), 0);
	(kasfIntelEventNotEnded(), 0);
	kasJump("LocationCard", Init_Mission07_Events_LocationCard, Watch_Mission07_Events_LocationCard);
	return;
	
}


//
//  "watch" code for Mission07 Events FSM
//
void Watch_Mission07_Events(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("_VIFONCE010") && (kasfVarValueGet("G_HarvestedRUs") > 600)) // "ifonce" #10
	{
	kasfVarCreateSet("_VIFONCE010", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "MothershipComeOnIn"), 0);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("UnknownContactsWait", Init_Mission07_Events_UnknownContactsWait, Watch_Mission07_Events_UnknownContactsWait);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE011") && (kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Stuff"), "HeavyCruiser"))) // "ifonce" #11
	{
	kasfVarCreateSet("_VIFONCE011", 1);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "MothershipComeOnIn"), 0);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("UnknownContactsWait", Init_Mission07_Events_UnknownContactsWait, Watch_Mission07_Events_UnknownContactsWait);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE012") && ((kasfRUsEnemyCollected() > 1400))) // "ifonce" #12
	{
	kasfVarCreateSet("_VIFONCE012", 1);
	(kasfObjectiveSet("Harvest", 1), 0);
	}
	if (!kasfVarValueGet("_VIFONCE013") && (kasfMsgReceived("ImTakingTheResourcers"))) // "ifonce" #13
	{
	kasfVarCreateSet("_VIFONCE013", 1);
	(kasfTimerCreateSetStart("Resourcers", kasfRandom(20, 30)), 0);
	}
	if (!kasfVarValueGet("_VIFONCE014") && (kasfMsgReceived("MoSwarmersInTrouble"))) // "ifonce" #14
	{
	kasfVarCreateSet("_VIFONCE014", 1);
	(kasfTimerCreateSetStart("ResearchTimer", 45), 0);
	}
	if (kasfVarValueGet("G_CLICK_Harvest"))
	{
	(kasfVarDestroy("G_CLICK_Harvest"), 0);
	kasJump("NebulaRich", Init_Mission07_Events_NebulaRich, Watch_Mission07_Events_NebulaRich);
	return;
	}
	else if (kasfVarValueGet("G_CLICK_DefendFleet"))
	{
	(kasfVarDestroy("G_CLICK_DefendFleet"), 0);
	kasJump("DefendMothership", Init_Mission07_Events_DefendMothership, Watch_Mission07_Events_DefendMothership);
	return;
	}
	else if (kasfVarValueGet("G_CLICK_ProtectResourcers"))
	{
	(kasfVarDestroy("G_CLICK_ProtectResourcers"), 0);
	kasJump("ProtectResourcers", Init_Mission07_Events_ProtectResourcers, Watch_Mission07_Events_ProtectResourcers);
	return;
	}
	if (kasfVarValueGet("InNullState") && !kasfVarValueGet("InFinalState"))
	{
	if (!kasfVarValueGet("_VIFONCE015") && (kasfTimerExpiredDestroy("ChargeUpTimer1"))) // "ifonce" #15
	{
	kasfVarCreateSet("_VIFONCE015", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("HyperModuleCharging1", Init_Mission07_Events_HyperModuleCharging1, Watch_Mission07_Events_HyperModuleCharging1);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE016") && (kasfTimerExpiredDestroy("ChargeUpTimer2"))) // "ifonce" #16
	{
	kasfVarCreateSet("_VIFONCE016", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("HyperModuleCharging2", Init_Mission07_Events_HyperModuleCharging2, Watch_Mission07_Events_HyperModuleCharging2);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE017") && (kasfTimerExpiredDestroy("ChargeUpTimer3"))) // "ifonce" #17
	{
	kasfVarCreateSet("_VIFONCE017", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("LetsGetOutOfHere", Init_Mission07_Events_LetsGetOutOfHere, Watch_Mission07_Events_LetsGetOutOfHere);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE018") && (kasfTimerExpiredDestroy("ResearchTimer"))) // "ifonce" #18
	{
	kasfVarCreateSet("_VIFONCE018", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("AddedResearch", Init_Mission07_Events_AddedResearch, Watch_Mission07_Events_AddedResearch);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE019") && (kasfTimerExpiredDestroy("Resourcers"))) // "ifonce" #19
	{
	kasfVarCreateSet("_VIFONCE019", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("ProtectResourcers", Init_Mission07_Events_ProtectResourcers, Watch_Mission07_Events_ProtectResourcers);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE020") && (kasfMsgReceived("P2MothershipBlowin"))) // "ifonce" #20
	{
	kasfVarCreateSet("_VIFONCE020", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("P2MothershipEscapes", Init_Mission07_Events_P2MothershipEscapes, Watch_Mission07_Events_P2MothershipEscapes);
	return;
	}
	if (!kasfVarValueGet("_VIFONCE021") && (kasfVarValueGet("P2MothershipIn") && !kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Temp"), "P2Mothership"))) // "ifonce" #21
	{
	kasfVarCreateSet("_VIFONCE021", 1);
	(kasfVarValueSet("InNullState", 0), 0);
	kasJump("HyperspaceBack", Init_Mission07_Events_HyperspaceBack, Watch_Mission07_Events_HyperspaceBack);
	return;
	}
	}
	
}


//
//  "initialize" code for Mission07 Events LocationCard state
//
void Init_Mission07_Events_LocationCard(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("LocationCardTimer", 2), 0);
	
}


//
//  "watch" code for Mission07 Events LocationCard state
//
void Watch_Mission07_Events_LocationCard(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("LocationCardTimer"))
	{
	(kasfLocationCard(5000, LSTRING_LCLocationCard[strCurLanguage]), 0);
	kasJump("Wait1", Init_Mission07_Events_Wait1, Watch_Mission07_Events_Wait1);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events Wait1 state
//
void Init_Mission07_Events_Wait1(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("Launching", 8), 0);
	
}


//
//  "watch" code for Mission07 Events Wait1 state
//
void Watch_Mission07_Events_Wait1(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("Launching"))
	{
	kasJump("NebulaRich", Init_Mission07_Events_NebulaRich, Watch_Mission07_Events_NebulaRich);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events NebulaRich state
//
void Init_Mission07_Events_NebulaRich(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((540 + 4096 + 268435456), 0), 0);
	(kasfObjectiveCreate("Harvest", LSTRING_OBHarvestNebula[strCurLanguage], "fleet intel 3.2"), 0);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "watch" code for Mission07 Events NebulaRich state
//
void Watch_Mission07_Events_NebulaRich(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 Events UnknownContactsWait state
//
void Init_Mission07_Events_UnknownContactsWait(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("ScaryUFOGuys", kasfRandom(20, 28)), 0);
	
}


//
//  "watch" code for Mission07 Events UnknownContactsWait state
//
void Watch_Mission07_Events_UnknownContactsWait(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("ScaryUFOGuys"))
	{
	(kasfVarCreateSet("MothershipIn", 1), 0);
	kasJump("LBXIn1", Init_Mission07_Events_LBXIn1, Watch_Mission07_Events_LBXIn1);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events LBXIn1 state
//
void Init_Mission07_Events_LBXIn1(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfWideScreenIn(30), 0);
	(kasfTimerCreateSetStart("LBXTimer", 4), 0);
	
}


//
//  "watch" code for Mission07 Events LBXIn1 state
//
void Watch_Mission07_Events_LBXIn1(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if ((kasfTimerRemaining("LBXTimer") == 0))
	{
	(kasfOpenSensors(80000), 0);
	kasJump("UnknownContacts", Init_Mission07_Events_UnknownContacts, Watch_Mission07_Events_UnknownContacts);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events UnknownContacts state
//
void Init_Mission07_Events_UnknownContacts(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((541 + 4096 + 268435456), 0), 0);
	(kasfTutSetPointerTargetShipSelection("Contacts", kasAITeamShipsPtr("P2Mothership")), 0);
	(kasfPingAddShips(kasAITeamShipsPtr("P2Mothership"), "UnknownContacts"), 0);
	
}


//
//  "watch" code for Mission07 Events UnknownContacts state
//
void Watch_Mission07_Events_UnknownContacts(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfIntelEventEnded())
	{
	(kasfTutRemoveAllPointers(), 0);
	(kasfCloseSensors(1), 0);
	(kasfWideScreenOut(90), 0);
	kasJump("PreparingAmbassador", Init_Mission07_Events_PreparingAmbassador, Watch_Mission07_Events_PreparingAmbassador);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events PreparingAmbassador state
//
void Init_Mission07_Events_PreparingAmbassador(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((542 + 4096 + 268435456), 0), 0);
	
}


//
//  "watch" code for Mission07 Events PreparingAmbassador state
//
void Watch_Mission07_Events_PreparingAmbassador(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfIntelEventEnded())
	{
	(kasfTimerCreateSetStart("Ambassador", 5), 0);
	(kasfTimerCreateSetStart("LBX", 2), 0);
	}
	if (kasfTimerExpiredDestroy("LBX"))
	{
	(kasfWideScreenIn(90), 0);
	}
	if (kasfTimerExpiredDestroy("Ambassador"))
	{
	kasJump("P2IntroNIS", Init_Mission07_Events_P2IntroNIS, Watch_Mission07_Events_P2IntroNIS);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events P2IntroNIS state
//
void Init_Mission07_Events_P2IntroNIS(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasfFindEnemyShipsOfType(kasGrowSelectionPtr("NISTargetShips"), "Mothership");
	(kasfPingRemove("UnknownContacts"), 0);
	(kasfVarCreateSet("G_PlayNis", 5), 0);
	(kasfVarCreateSet("G_PlayingNIS", 1), 0);
	
}


//
//  "watch" code for Mission07 Events P2IntroNIS state
//
void Watch_Mission07_Events_P2IntroNIS(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfVarValueGet("G_Nis5Complete"))
	{
	(kasfVarValueSet("G_PlayingNIS", 0), 0);
	(kasfWideScreenOut(90), 0);
	kasJump("DefendMothership", Init_Mission07_Events_DefendMothership, Watch_Mission07_Events_DefendMothership);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events DefendMothership state
//
void Init_Mission07_Events_DefendMothership(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfMusicPlay(14), 0);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((550 + 4096 + 268435456), 0), 0);
	(kasfObjectiveCreate("DefendFleet", LSTRING_OBDefendFleet[strCurLanguage], "fleet intel 3.2"), 0);
	(kasfTimerCreateSetStart("ChargeUpTimer1", 30), 0);
	
}


//
//  "watch" code for Mission07 Events DefendMothership state
//
void Watch_Mission07_Events_DefendMothership(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "initialize" code for Mission07 Events HyperModuleCharging1 state
//
void Init_Mission07_Events_HyperModuleCharging1(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((788 + 2048 + 268435456), 0), 0);
	(kasfTimerCreateSetStart("ChargeUpTimer2", 420), 0);
	
}


//
//  "watch" code for Mission07 Events HyperModuleCharging1 state
//
void Watch_Mission07_Events_HyperModuleCharging1(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "initialize" code for Mission07 Events HyperModuleCharging2 state
//
void Init_Mission07_Events_HyperModuleCharging2(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((789 + 2048 + 268435456), 0), 0);
	(kasfTimerCreateSetStart("ChargeUpTimer3", 60), 0);
	
}


//
//  "watch" code for Mission07 Events HyperModuleCharging2 state
//
void Watch_Mission07_Events_HyperModuleCharging2(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "initialize" code for Mission07 Events LetsGetOutOfHere state
//
void Init_Mission07_Events_LetsGetOutOfHere(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((553 + 2048 + 268435456), 0), 0);
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "PlayerPoweredUp"), 0);
	
}


//
//  "watch" code for Mission07 Events LetsGetOutOfHere state
//
void Watch_Mission07_Events_LetsGetOutOfHere(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfIntelEventEnded())
	{
	kasJump("Engage", Init_Mission07_Events_Engage, Watch_Mission07_Events_Engage);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events Engage state
//
void Init_Mission07_Events_Engage(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((554 + 4096 + 268435456), 0), 0);
	(kasfDisablePlayerHyperspace(), 0);
	(kasfObjectiveSet("DefendFleet", 1), 0);
	(kasfObjectiveCreate("Hyperspace", LSTRING_TBHyperspace[strCurLanguage], LSTRING_FIEngage[strCurLanguage]), 0);
	
}


//
//  "watch" code for Mission07 Events Engage state
//
void Watch_Mission07_Events_Engage(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTutGameSentMessage("Game_HyperspaceFailed") == 1)
	{
	kasJump("HyperdriveFail", Init_Mission07_Events_HyperdriveFail, Watch_Mission07_Events_HyperdriveFail);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events HyperdriveFail state
//
void Init_Mission07_Events_HyperdriveFail(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((790 + 2048 + 268435456), 0), 0);
	
}


//
//  "watch" code for Mission07 Events HyperdriveFail state
//
void Watch_Mission07_Events_HyperdriveFail(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfIntelEventEnded())
	{
	(kasfMsgSend(kasAITeamPtr("P2Mothership"), "TheyreGettingAway"), 0);
	kasJump("ContinueProtecting", Init_Mission07_Events_ContinueProtecting, Watch_Mission07_Events_ContinueProtecting);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events ContinueProtecting state
//
void Init_Mission07_Events_ContinueProtecting(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((767 + 4096 + 268435456), 0), 0);
	(kasfObjectiveDestroy("DefendFleet"), 0);
	(kasfObjectiveDestroy("Hyperspace"), 0);
	(kasfObjectiveCreate("DefendFleet", LSTRING_OBDefendFleet[strCurLanguage], "fleet intel 3.2"), 0);
	(kasfTimerCreateSetStart("ResearchTimer", 45), 0);
	
}


//
//  "watch" code for Mission07 Events ContinueProtecting state
//
void Watch_Mission07_Events_ContinueProtecting(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "initialize" code for Mission07 Events AddedResearch state
//
void Init_Mission07_Events_AddedResearch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((770 + 4096 + 268435456), 0), 0);
	(kasfAllowPlayerToResearch("TargetingSystems"), 0);
	
}


//
//  "watch" code for Mission07 Events AddedResearch state
//
void Watch_Mission07_Events_AddedResearch(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "initialize" code for Mission07 Events ProtectResourcers state
//
void Init_Mission07_Events_ProtectResourcers(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((557 + 4096 + 268435456), 0), 0);
	(kasfObjectiveCreateSecondary("ProtectResourcers", LSTRING_OBProtect[strCurLanguage], LSTRING_FIProtectResources[strCurLanguage]), 0);
	
}


//
//  "watch" code for Mission07 Events ProtectResourcers state
//
void Watch_Mission07_Events_ProtectResourcers(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("NullState", Init_Mission07_Events_NullState, Watch_Mission07_Events_NullState);
	return;
	
}


//
//  "initialize" code for Mission07 Events P2MothershipEscapes state
//
void Init_Mission07_Events_P2MothershipEscapes(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfTutCameraFocus(kasAITeamShipsPtr("P2Mothership")), 0);
	(kasfTutCameraFocus(kasAITeamShipsPtr("P2Mothership")), 0);
	(kasfMusicStop(4), 0);
	(kasfTimerCreateSetStart("P2EscapeTimer", 20), 0);
	(kasfTimerCreateSetStart("CancelFocus", 14), 0);
	
}


//
//  "watch" code for Mission07 Events P2MothershipEscapes state
//
void Watch_Mission07_Events_P2MothershipEscapes(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTutGameSentMessage("Game_BandBoxFocus,Game_ClickFocus,KB_CancelFocus,KB_Focus"))
	{
	(kasfTimerDestroy("CancelFocus"), 0);
	}
	if (kasfTimerExpiredDestroy("CancelFocus"))
	{
	(kasfSoundEvent(262), 0);
	(kasfTutCameraFocusCancel(), 0);
	(kasfTutCameraFocusCancel(), 0);
	}
	if (kasfTimerExpiredDestroy("P2EscapeTimer"))
	{
	(kasfVarValueSet("P2MothershipIn", 0), 0);
	kasJump("HyperspaceBack", Init_Mission07_Events_HyperspaceBack, Watch_Mission07_Events_HyperspaceBack);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events HyperspaceBack state
//
void Init_Mission07_Events_HyperspaceBack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((768 + 4096 + 268435456), 0), 0);
	(kasfObjectiveCreate("Hyperspace", LSTRING_TBHyperspace[strCurLanguage], LSTRING_FIEngage[strCurLanguage]), 0);
	(kasfObjectiveSet("DefendFleet", 1), 0);
	
}


//
//  "watch" code for Mission07 Events HyperspaceBack state
//
void Watch_Mission07_Events_HyperspaceBack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfIntelEventEnded())
	{
	kasJump("JumpAway", Init_Mission07_Events_JumpAway, Watch_Mission07_Events_JumpAway);
	return;
	}
	
}


//
//  "initialize" code for Mission07 Events JumpAway state
//
void Init_Mission07_Events_JumpAway(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfSoundEvent(262), 0);
	(kasfSpeechEvent((769 + 4096 + 268435456), 0), 0);
	
}


//
//  "watch" code for Mission07 Events JumpAway state
//
void Watch_Mission07_Events_JumpAway(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasJump("FinalState", Init_Mission07_Events_FinalState, Watch_Mission07_Events_FinalState);
	return;
	
}


//
//  "initialize" code for Mission07 Events NullState state
//
void Init_Mission07_Events_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("InNullState", 1), 0);
	
}


//
//  "watch" code for Mission07 Events NullState state
//
void Watch_Mission07_Events_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 Events FinalState state
//
void Init_Mission07_Events_FinalState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("InFinalState", 1), 0);
	
}


//
//  "watch" code for Mission07 Events FinalState state
//
void Watch_Mission07_Events_FinalState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 P2Mothership FSM
//
void Init_Mission07_P2Mothership(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("WaveNum", 0), 0);
	kasJump("Wait", Init_Mission07_P2Mothership_Wait, Watch_Mission07_P2Mothership_Wait);
	return;
	
}


//
//  "watch" code for Mission07 P2Mothership FSM
//
void Watch_Mission07_P2Mothership(void)
{
	CurrentMissionScope = KAS_SCOPE_FSM;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("G_MothershipDead"))
	{
	if (!kasfVarValueGet("_VIFONCE022") && (kasfNearby(kasVectorPtr("Vol2"), 2000))) // "ifonce" #22
	{
	kasfVarCreateSet("_VIFONCE022", 1);
	(kasfVarValueSet("MovingToVol2", 0), 0);
	(kasfVarCreateSet("MovingToVol1", 1), 0);
	(kasfMoveTo(kasVectorPtr("Vol1")), 0);
	}
	if (!kasfVarValueGet("_VIFONCE023") && (kasfNearby(kasVectorPtr("Vol1"), 2000))) // "ifonce" #23
	{
	kasfVarCreateSet("_VIFONCE023", 1);
	(kasfVarValueSet("MovingToVol1", 0), 0);
	(kasfVarCreateSet("MovingToVol3", 1), 0);
	(kasfMoveTo(kasVectorPtr("Vol3")), 0);
	}
	if (!kasfVarValueGet("_VIFONCE024") && (kasfNearby(kasVectorPtr("Vol3"), 2000))) // "ifonce" #24
	{
	kasfVarCreateSet("_VIFONCE024", 1);
	(kasfVarValueSet("MovingToVol2", 0), 0);
	(kasfVarCreateSet("AttackingMothership", 1), 0);
	(kasfAttackMothership(), 0);
	}
	if (!kasfVarValueGet("_VIFONCE025") && ((kasfVarValueGet("WaveNum") == 6) && kasfVarValueGet("FinalAssaultGone"))) // "ifonce" #25
	{
	kasfVarCreateSet("_VIFONCE025", 1);
	(kasfTimerCreateSetStart("ImDryImOuttaHere", kasfRandom(60, 90)), 0);
	}
	if (!kasfVarValueGet("_VIFONCE026") && (kasfTimerExpiredDestroy("ImDryImOuttaHere"))) // "ifonce" #26
	{
	kasfVarCreateSet("_VIFONCE026", 1);
	kasJump("GetOuttaHere", Init_Mission07_P2Mothership_GetOuttaHere, Watch_Mission07_P2Mothership_GetOuttaHere);
	return;
	}
	if (!kasfVarValueGet("DodgingOrOuttaHere") && kasfTeamHealthLowest() <= 45)
	{
	if (kasfVarValueGet("AttackingMothership"))
	{
	kasJump("GetOuttaHere", Init_Mission07_P2Mothership_GetOuttaHere, Watch_Mission07_P2Mothership_GetOuttaHere);
	return;
	}
	else
	{
	kasJump("HyperDodge", Init_Mission07_P2Mothership_HyperDodge, Watch_Mission07_P2Mothership_HyperDodge);
	return;
	}
	}
	}
	if (!kasfVarValueGet("_VIFONCE027") && (kasfTeamCount() == 0)) // "ifonce" #27
	{
	kasfVarCreateSet("_VIFONCE027", 1);
	kasfFindEnemyShipsOfType(kasGrowSelectionPtr("YourDeadNow"), "Mothership");
	(kasfKamikazeEveryone(kasGrowSelectionPtr("YourDeadNow")), 0);
	(kasfVarCreateSet("G_MothershipDead", 1), 0);
	kasJump("NullState", Init_Mission07_P2Mothership_NullState, Watch_Mission07_P2Mothership_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership Wait state
//
void Init_Mission07_P2Mothership_Wait(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("WaitForDocking", 2), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership Wait state
//
void Watch_Mission07_P2Mothership_Wait(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("WaitForDocking"))
	{
	(kasfTeamHyperspaceOut(), 0);
	}
	if (kasfMsgReceived("MothershipComeOnIn"))
	{
	kasJump("Reappear", Init_Mission07_P2Mothership_Reappear, Watch_Mission07_P2Mothership_Reappear);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership Reappear state
//
void Init_Mission07_P2Mothership_Reappear(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTeamHyperspaceIn(kasVectorPtr("MothershipIn")), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership Reappear state
//
void Watch_Mission07_P2Mothership_Reappear(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("_VIFONCE028") && (kasfNearby(kasVectorPtr("MothershipIn"), 2000))) // "ifonce" #28
	{
	kasfVarCreateSet("_VIFONCE028", 1);
	(kasfAttackMothership(), 0);
	}
	if (!kasfVarValueGet("_VIFONCE029") && (kasfVarValueGet("G_PlayingNIS"))) // "ifonce" #29
	{
	kasfVarCreateSet("_VIFONCE029", 1);
	(kasfStop(), 0);
	(kasfHideShips(kasAITeamShipsPtr("P2Mothership")), 0);
	}
	if (kasfVarValueGet("G_Nis5Complete"))
	{
	(kasfUnhideShips(kasAITeamShipsPtr("P2Mothership")), 0);
	(kasfMoveTo(kasVectorPtr("Vol2")), 0);
	(kasfVarCreateSet("MovingToVol2", 1), 0);
	kasJump("InitialAttack", Init_Mission07_P2Mothership_InitialAttack, Watch_Mission07_P2Mothership_InitialAttack);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership InitialAttack state
//
void Init_Mission07_P2Mothership_InitialAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarValueInc("WaveNum"), 0);
	kasFSMCreate("GenericMothershipSwarm", Init_Mission07_GenericMothershipSwarm, Watch_Mission07_GenericMothershipSwarm, kasAITeamPtr("NISTeam1"));
	kasfFindEnemyShipsOfType(kasGrowSelectionPtr("Test"), "ResourceCollector");
	kasfFindEnemiesNearby(kasGrowSelectionPtr("Test"), 6000);
	if (kasfShipsSelectSpecial(kasGrowSelectionPtr("Armed"), kasGrowSelectionPtr("Test"), 3) > 5)
	{
	kasFSMCreate("ResourceDefenderSwarm", Init_Mission07_ResourceDefenderSwarm, Watch_Mission07_ResourceDefenderSwarm, kasAITeamPtr("NISTeam2"));
	(kasfTimerCreateSetStart("ResourcerSwarm", kasfRandom(50, 70)), 0);
	}
	else
	{
	kasFSMCreate("GenericResourcerSwarm", Init_Mission07_GenericResourcerSwarm, Watch_Mission07_GenericResourcerSwarm, kasAITeamPtr("NISTeam2"));
	(kasfTimerCreateSetStart("ResourceDefenderSwarm", kasfRandom(50, 70)), 0);
	}
	
}


//
//  "watch" code for Mission07 P2Mothership InitialAttack state
//
void Watch_Mission07_P2Mothership_InitialAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("ResourcerSwarm"))
	{
	kasFSMCreate("GenericResourcerSwarm", Init_Mission07_GenericResourcerSwarm, Watch_Mission07_GenericResourcerSwarm, kasAITeamPtr("NISTeam3"));
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	}
	if (kasfTimerExpiredDestroy("ResourceDefenderSwarm"))
	{
	kasFSMCreate("ResourceDefenderSwarm", Init_Mission07_ResourceDefenderSwarm, Watch_Mission07_ResourceDefenderSwarm, kasAITeamPtr("NISTeam3"));
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership ReissueMove state
//
void Init_Mission07_P2Mothership_ReissueMove(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfVarValueGet("MovingToVol2"))
	{
	(kasfMoveTo(kasVectorPtr("Vol2")), 0);
	}
	else if (kasfVarValueGet("MovingToVol1"))
	{
	(kasfMoveTo(kasVectorPtr("Vol1")), 0);
	}
	else if (kasfVarValueGet("MovingToVol3"))
	{
	(kasfMoveTo(kasVectorPtr("Vol3")), 0);
	}
	else if (kasfVarValueGet("AttackingMothership"))
	{
	(kasfAttackMothership(), 0);
	}
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	
}


//
//  "watch" code for Mission07 P2Mothership ReissueMove state
//
void Watch_Mission07_P2Mothership_ReissueMove(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 P2Mothership HyperDodge state
//
void Init_Mission07_P2Mothership_HyperDodge(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("DodgingOrOuttaHere", 1), 0);
	(kasfTeamHyperspaceOut(), 0);
	(kasfTimerCreateSetStart("HyperspaceTimer", 15), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership HyperDodge state
//
void Watch_Mission07_P2Mothership_HyperDodge(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("HyperspaceTimer"))
	{
	kasJump("HypeDodgeIn", Init_Mission07_P2Mothership_HypeDodgeIn, Watch_Mission07_P2Mothership_HypeDodgeIn);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership HypeDodgeIn state
//
void Init_Mission07_P2Mothership_HypeDodgeIn(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTeamSetPercentDamaged(100), 0);
	if (kasfVarValueGet("MovingToVol2"))
	{
	(kasfTeamHyperspaceIn(kasVectorPtr("Vol2")), 0);
	}
	else if (kasfVarValueGet("MovingToVol1"))
	{
	(kasfTeamHyperspaceIn(kasVectorPtr("Vol1")), 0);
	}
	else if (kasfVarValueGet("MovingToVol3"))
	{
	(kasfTeamHyperspaceIn(kasVectorPtr("Vol3")), 0);
	}
	else
	{
	(kasfTeamHyperspaceIn(kasVectorPtr("Vol2")), 0);
	}
	
}


//
//  "watch" code for Mission07 P2Mothership HypeDodgeIn state
//
void Watch_Mission07_P2Mothership_HypeDodgeIn(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfNearby(kasThisTeamsVectorPtr(), 10000))
	{
	(kasfVarDestroy("DodgingOrOuttaHere"), 0);
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership MidBattle state
//
void Init_Mission07_P2Mothership_MidBattle(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreate("NumSwarmers"), 0);
	(kasfVarCreate("NumPods"), 0);
	(kasfTimerCreateSetStart("DownTime", kasfRandom(80, 100)), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership MidBattle state
//
void Watch_Mission07_P2Mothership_MidBattle(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (!kasfVarValueGet("_VIFONCE030") && (kasfMsgReceived("PlayerPoweredUp"))) // "ifonce" #30
	{
	kasfVarCreateSet("_VIFONCE030", 1);
	kasJump("EndBattleDelay", Init_Mission07_P2Mothership_EndBattleDelay, Watch_Mission07_P2Mothership_EndBattleDelay);
	return;
	}
	if (kasfUnderAttack(kasGrowSelectionPtr("Attacking")) && (kasfShipsCount(kasGrowSelectionPtr("DefendMothership")) < kasfRandom(4, 8)))
	{
	kasJump("DefendSelf", Init_Mission07_P2Mothership_DefendSelf, Watch_Mission07_P2Mothership_DefendSelf);
	return;
	}
	if (!kasfShipsSelectMoving(kasGrowSelectionPtr("Move"), (&kasThisTeamPtr->shipList)))
	{
	kasJump("ReissueMove", Init_Mission07_P2Mothership_ReissueMove, Watch_Mission07_P2Mothership_ReissueMove);
	return;
	}
	if (kasfTimerExpiredDestroy("PodTest"))
	{
	(kasfTimerSet("DownTime", 0), 0);
	}
	if (!kasfTimerExpired("DownTime") && !kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Pods"), "P2FuelPod") && !kasfTimerRemaining("PodTest"))
	{
	(kasfTimerCreateSetStart("PodTest", 8), 0);
	}
	if (kasfTimerExpired("DownTime"))
	{
	if (kasfMsgReceived("ResSwarmersInTrouble"))
	{
	(kasfVarCreateSet("ResSwarmers", 1), 0);
	kasJump("SecondAttack", Init_Mission07_P2Mothership_SecondAttack, Watch_Mission07_P2Mothership_SecondAttack);
	return;
	}
	if (kasfMsgReceived("ResDefSwarmersInTrouble"))
	{
	(kasfVarCreateSet("ResSwarmers", 1), 0);
	kasJump("SecondAttack", Init_Mission07_P2Mothership_SecondAttack, Watch_Mission07_P2Mothership_SecondAttack);
	return;
	}
	(kasfVarValueSet("NumSwarmers", kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Swarmers"), "P2Swarmer")), 0);
	(kasfVarValueSet("NumPods", kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Pods"), "P2FuelPod")), 0);
	if ((kasfVarValueGet("NumPods") < 2) || (kasfVarValueGet("NumSwarmers") < 10))
	{
	(kasfVarCreateSet("ResSwarmers", 1), 0);
	kasJump("SecondAttack", Init_Mission07_P2Mothership_SecondAttack, Watch_Mission07_P2Mothership_SecondAttack);
	return;
	}
	if ((kasfVarValueGet("WaveNum") != 2) && (kasfVarValueGet("WaveNum") != 4))
	{
	if (kasfMsgReceived("MoSwarmersInTrouble"))
	{
	(kasfVarCreateSet("MoSwarmers", 1), 0);
	kasJump("SecondAttack", Init_Mission07_P2Mothership_SecondAttack, Watch_Mission07_P2Mothership_SecondAttack);
	return;
	}
	}
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership SecondAttack state
//
void Init_Mission07_P2Mothership_SecondAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfVarValueGet("WaveNum") == 1)
	{
	if (kasfVarValueGet("ResSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "ResourceSwarm"), 0);
	}
	else if (kasfVarValueGet("ResDefSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "ResourceDefenderSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "ResourceDefenderSwarm"), 0);
	}
	else if (kasfVarValueGet("MoSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "MothershipSwarm"), 0);
	}
	else
	{
	(kasfCommandMessage("No One To Send To"), 0);
	}
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 2)
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod1WAVE2"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2A"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2B"), "ResourceSwarm"), 0);
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 3)
	{
	if (kasfVarValueGet("MoSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "MothershipSwarm"), 0);
	}
	else if (kasfVarValueGet("ResDefSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "ResourceDefenderSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "ResourceDefenderSwarm"), 0);
	}
	else if (kasfVarValueGet("ResSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "ResourceSwarm"), 0);
	}
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 4)
	{
	if (kasfVarValueGet("MoSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "MothershipSwarm"), 0);
	}
	else if (kasfVarValueGet("ResDefSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "ResourceDefenderSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "ResourceDefenderSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "ResourceDefenderSwarm"), 0);
	}
	else if (kasfVarValueGet("ResSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "ResourceSwarm"), 0);
	}
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 5)
	{
	if (kasfVarValueGet("MoSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "MothershipSwarm"), 0);
	}
	else if (kasfVarValueGet("ResDefSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "ResourceDefenderSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "ResourceDefenderSwarm"), 0);
	}
	else if (kasfVarValueGet("ResSwarmers"))
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "ResourceSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "ResourceSwarm"), 0);
	}
	(kasfVarValueInc("WaveNum"), 0);
	}
	(kasfTimerCreateSetStart("AttackTimer", kasfRandom(50, 90)), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership SecondAttack state
//
void Watch_Mission07_P2Mothership_SecondAttack(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("AttackTimer"))
	{
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership DefendSelf state
//
void Init_Mission07_P2Mothership_DefendSelf(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	kasfUnderAttack(kasGrowSelectionPtr("Attacking"));
	if (kasfShipsSelectCapital(kasGrowSelectionPtr("Capital"), kasGrowSelectionPtr("Attacking")))
	{
	(kasfVarCreateSet("CounterAttack", 1), 0);
	(kasfAttack(kasGrowSelectionPtr("Capital")), 0);
	}
	if (kasfVarValueGet("WaveNum") == 1)
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod1WAVE1"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE1"), "DefendMothership"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 2)
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod1WAVE2"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2A"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer1WAVE2B"), "DefendMothership"), 0);
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 3)
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE1"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE1"), "DefendMothership"), 0);
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 4)
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod2WAVE2"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2A"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer2WAVE2B"), "DefendMothership"), 0);
	(kasfVarValueInc("WaveNum"), 0);
	}
	else if (kasfVarValueGet("WaveNum") == 5)
	{
	(kasfMsgSend(kasAITeamPtr("FuelPod3WAVE1"), "DefendMothership"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer3WAVE1"), "DefendMothership"), 0);
	(kasfVarValueInc("WaveNum"), 0);
	}
	(kasfTimerCreateSetStart("DefenseTimer", kasfRandom(40, 100)), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership DefendSelf state
//
void Watch_Mission07_P2Mothership_DefendSelf(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("DefenseTimer"))
	{
	if (kasfUnderAttack(kasGrowSelectionPtr("Attacking")))
	{
	(kasfSetSwarmerTargets(kasGrowSelectionPtr("Attacking")), 0);
	}
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	}
	if (kasfVarValueGet("CounterAttack") && (kasfShipsOrder((&kasThisTeamPtr->shipList)) != 2))
	{
	if (kasfUnderAttack(kasGrowSelectionPtr("Attacking")) && kasfShipsSelectCapital(kasGrowSelectionPtr("Capital"), kasGrowSelectionPtr("Attacking")))
	{
	(kasfAttack(kasGrowSelectionPtr("Capital")), 0);
	}
	else
	{
	(kasfVarDestroy("CounterAttack"), 0);
	}
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership EndBattleDelay state
//
void Init_Mission07_P2Mothership_EndBattleDelay(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfTimerCreateSetStart("AttackTimer", kasfRandom(5, 20)), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership EndBattleDelay state
//
void Watch_Mission07_P2Mothership_EndBattleDelay(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("AttackTimer"))
	{
	kasJump("EndBattle", Init_Mission07_P2Mothership_EndBattle, Watch_Mission07_P2Mothership_EndBattle);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership EndBattle state
//
void Init_Mission07_P2Mothership_EndBattle(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfMsgSend(kasAITeamPtr("FuelPod3WAVE2"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer3WAVE2A"), "MothershipSwarm"), 0);
	(kasfMsgSend(kasAITeamPtr("Swarmer3WAVE2B"), "MothershipSwarm"), 0);
	(kasfTimerCreateSetStart("AttackTimer", kasfRandom(30, 60)), 0);
	(kasfVarCreateSet("FinalAssaultGone", 1), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership EndBattle state
//
void Watch_Mission07_P2Mothership_EndBattle(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTimerExpiredDestroy("AttackTimer") && kasfVarValueGet("WaveNum") < 6)
	{
	kasJump("MidBattle", Init_Mission07_P2Mothership_MidBattle, Watch_Mission07_P2Mothership_MidBattle);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership GetOuttaHere state
//
void Init_Mission07_P2Mothership_GetOuttaHere(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	(kasfVarCreateSet("DodgingOrOuttaHere", 1), 0);
	(kasfMsgSendAll("DockNow"), 0);
	(kasfTimerCreateSetStart("BootIt", 50), 0);
	
}


//
//  "watch" code for Mission07 P2Mothership GetOuttaHere state
//
void Watch_Mission07_P2Mothership_GetOuttaHere(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	if (kasfTeamHealthLowest() < 10)
	{
	(kasfTeamSetPercentDamaged(15), 0);
	}
	(kasfVarValueSet("NumSwarmers", kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("Swarmers"), "P2Swarmer")), 0);
	(kasfVarValueSet("NumAdv", kasfFindFriendlyShipsOfType(kasGrowSelectionPtr("AdvSwarmers"), "P2AdvanceSwarmer")), 0);
	if (((kasfVarValueGet("NumSwarmers") == 0) && (kasfVarValueGet("NumAdv") == 0)) || (kasfTeamHealthLowest() <= 8) || (kasfTimerExpiredDestroy("BootIt")))
	{
	(kasfMsgSendAll("P2MothershipBlowin"), 0);
	(kasfTeamHyperspaceOut(), 0);
	kasJump("NullState", Init_Mission07_P2Mothership_NullState, Watch_Mission07_P2Mothership_NullState);
	return;
	}
	
}


//
//  "initialize" code for Mission07 P2Mothership NullState state
//
void Init_Mission07_P2Mothership_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "watch" code for Mission07 P2Mothership NullState state
//
void Watch_Mission07_P2Mothership_NullState(void)
{
	CurrentMissionScope = KAS_SCOPE_STATE;
	strcpy(CurrentMissionScopeName, kasThisTeamPtr->kasLabel);
	
}


//
//  "initialize" code for Mission07 mission
//
void Init_Mission07(void)
{
	CurrentMissionScope = KAS_SCOPE_MISSION;
	strcpy(CurrentMissionScopeName, "Mission07");
	kasFSMCreate("P2Mothership", Init_Mission07_P2Mothership, Watch_Mission07_P2Mothership, kasAITeamPtr("P2Mothership"));
	kasFSMCreate("PreAttackPod", Init_Mission07_PreAttackPod, Watch_Mission07_PreAttackPod, kasAITeamPtr("FuelPod1WAVE1"));
	kasFSMCreate("PreAttackPod", Init_Mission07_PreAttackPod, Watch_Mission07_PreAttackPod, kasAITeamPtr("FuelPod1WAVE2"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer1WAVE1"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer1WAVE2A"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer1WAVE2B"));
	kasFSMCreate("PreAttackPod", Init_Mission07_PreAttackPod, Watch_Mission07_PreAttackPod, kasAITeamPtr("FuelPod2WAVE1"));
	kasFSMCreate("PreAttackPod", Init_Mission07_PreAttackPod, Watch_Mission07_PreAttackPod, kasAITeamPtr("FuelPod2WAVE2"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer2WAVE1"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer2WAVE2A"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer2WAVE2B"));
	kasFSMCreate("PreAttackPod", Init_Mission07_PreAttackPod, Watch_Mission07_PreAttackPod, kasAITeamPtr("FuelPod3WAVE1"));
	kasFSMCreate("PreAttackPod", Init_Mission07_PreAttackPod, Watch_Mission07_PreAttackPod, kasAITeamPtr("FuelPod3WAVE2"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer3WAVE1"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer3WAVE2A"));
	kasFSMCreate("PreAttackSwarm", Init_Mission07_PreAttackSwarm, Watch_Mission07_PreAttackSwarm, kasAITeamPtr("Swarmer3WAVE2B"));
	kasFSMCreate("Events", Init_Mission07_Events, Watch_Mission07_Events, kasAITeamPtr("Dummy1"));
	(kasfVarCreateSet("WorldStartRUs", kasfGetWorldResources()), 0);
	(kasfVarCreateSet("PreviousWorldRUs", kasfGetWorldResources()), 0);
	(kasfVarCreateSet("CurrentRUs", kasfGetWorldResources()), 0);
	(kasfVarCreateSet("G_HarvestedRUs", 0), 0);
	(kasfSensorsWeirdness(160), 0);
	(kasfSaveLevel(7, LSTRING_LevelSave[strCurLanguage]), 0);
	
}


//
//  "watch" code for Mission07 mission
//
void Watch_Mission07(void)
{
	CurrentMissionScope = KAS_SCOPE_MISSION;
	strcpy(CurrentMissionScopeName, "Mission07");
	(kasfVarValueSet("CurrentRUs", kasfGetWorldResources()), 0);
	(kasfVarValueSet("G_HarvestedRUs", kasfVarValueGet("HarvestedRUs") + (kasfVarValueGet("PreviousWorldRUs") - kasfVarValueGet("CurrentRUs"))), 0);
	(kasfVarValueSet("PreviousWorldRUs", kasfVarValueGet("CurrentRUs")), 0);
	(kasfSensorsWeirdness((160 * kasfVarValueGet("CurrentRUs")) / kasfVarValueGet("WorldStartRUs")), 0);
	if (!kasfVarValueGet("_VIFONCE031") && (kasfDoesPlayerHave("MassDrive10Kt"))) // "ifonce" #31
	{
	kasfVarCreateSet("_VIFONCE031", 1);
	(kasfAllowPlayerToResearch("Chassis2"), 0);
	}
	if (!kasfVarValueGet("_VIFONCE032") && ((kasfDoesPlayerHave("Chassis2")) && (kasfVarValueGet("SetMediumGuns") == 0))) // "ifonce" #32
	{
	kasfVarCreateSet("_VIFONCE032", 1);
	(kasfAllowPlayerToResearch("MediumGuns"), 0);
	(kasfVarCreateSet("SetMediumGuns", 1), 0);
	}
	if (!kasfVarValueGet("_VIFONCE033") && (kasfDoesPlayerHave("MassDrive1Kt"))) // "ifonce" #33
	{
	kasfVarCreateSet("_VIFONCE033", 1);
	(kasfAllowPlayerToResearch("Chassis2"), 0);
	}
	if (!kasfVarValueGet("_VIFONCE034") && (!kasfDoesPlayerHave("MassDrive1Mt"))) // "ifonce" #34
	{
	kasfVarCreateSet("_VIFONCE034", 1);
	(kasfTimerCreateSetStart("Tech1Mt", kasfRandom(15, 25)), 0);
	}
	if (kasfTimerExpiredDestroy("Tech1Mt"))
	{
	(kasfSpeechEvent((531 + 4096 + 268435456), 0), 0);
	(kasfAllowPlayerToResearch("MassDrive1Mt"), 0);
	}
	
}


